<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="VegaFusion provides serverside acceleration of the Vega visualization grammar" lang="en" name="description" xml:lang="en" />
<meta content="VegaFusion" property="og:title" />
<meta content="VegaFusion provides serverside acceleration of the Vega visualization grammar" property="og:description" />
<meta content="en_US" property="og:locale" />
<meta content="https://vegafusion.io/" property="og:url" />
<meta content="https://vegafusion.io/_static/vegafusion_social.png" property="og:image" />
<meta content="&#64;vegafusion_io" property="twitter:site" />
<meta content="https://vegafusion.io/_static/vegafusion_social.png" property="twitter:image" />
<meta content="summary_large_image" property="twitter:card" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Announcing VegaFusion 1.3 &mdash; VegaFusion</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/site.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
 



</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            VegaFusion
              <img src="../../_static/VegaFusionLogo-Color.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../supported_environments.html">Supported Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mime_renderer.html">Mime Renderer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget_renderer.html">Widget Renderer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../widget.html">VegaFusionWidget</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../transformed_data.html">Transformed Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../save.html">Saving Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../low_level.html">Low Level APIs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../example_gallery.html">Example Gallery</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../background.html">Background and Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_it_works.html">How VegaFusion Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../technology.html">Technology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about_the_name.html">About the Name</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../related_projects.html">Related Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license_overview.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../citation.html">Citing VegaFusion</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Future</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">VegaFusion Roadmap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/hex-inc/vegafusion/">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/hex-inc/vegafusion/issues">Report an Issue</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/hex-inc/vegafusion/discussions">Start a Discussion</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Blog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../blog.html">Posts</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VegaFusion</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <!-- Disable top breadcrumb bar -->
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
<section id="announcing-vegafusion-1-3">
<h1>Announcing VegaFusion 1.3<a class="headerlink" href="#announcing-vegafusion-1-3" title="Permalink to this heading"></a></h1>
<p><strong>Transformed data for compound charts, Java library</strong></p>
<p>By: Jon Mease</p>
<hr class="docutils" />
<p>The VegaFusion team is happy to announce the release of version 1.3. Along with usual bug fixes and updates to the core Arrow and DataFusion dependencies, this release includes an enhancement to the <code class="docutils literal notranslate"><span class="pre">transformed_data</span></code> function to make it compatible with compound charts, adds DuckDB 0.8 support, and adds a new Java API.</p>
<section id="extract-transformed-data-from-compound-altair-charts">
<h2>Extract transformed data from compound Altair charts<a class="headerlink" href="#extract-transformed-data-from-compound-altair-charts" title="Permalink to this heading"></a></h2>
<p>The VegaFusion <a class="reference internal" href="../../transformed_data.html"><span class="std std-doc"><code class="docutils literal notranslate"><span class="pre">transformed_data</span></code></span></a> function can be used to extract the transformed data from an Altair chart object as a pandas DataFrame. Prior to 1.3.0, <code class="docutils literal notranslate"><span class="pre">transformed_data</span></code> was only supported on simple charts that involve only a single mark. Now, compound layered and concatenated charts are supported as well. In the case of a compound chart, <code class="docutils literal notranslate"><span class="pre">transformed_data</span></code> will return a list of pandas DataFrame’s rather than single DataFrame.</p>
<section id="example-histogram-with-a-global-mean-overlay">
<h3>Example: Histogram with a Global Mean Overlay<a class="headerlink" href="#example-histogram-with-a-global-mean-overlay" title="Permalink to this heading"></a></h3>
<p>Here is an example based on the <a class="reference external" href="https://altair-viz.github.io/gallery/histogram_with_a_global_mean_overlay.html">Histogram with a Global Mean Overlay</a> example from the Altair gallery.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>
<span class="kn">import</span> <span class="nn">vegafusion</span> <span class="k">as</span> <span class="nn">vf</span>
<span class="kn">from</span> <span class="nn">vega_datasets</span> <span class="kn">import</span> <span class="n">data</span>

<span class="n">vf</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">movies</span><span class="o">.</span><span class="n">url</span>

<span class="n">base</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

<span class="n">bar</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;IMDB_Rating:Q&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">bin</span><span class="p">()</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;count()&#39;</span>
<span class="p">)</span>

<span class="n">rule</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_rule</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;mean(IMDB_Rating):Q&#39;</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">bar</span> <span class="o">+</span> <span class="n">rule</span>
<span class="n">chart</span>
</pre></div>
</div>
<p><img alt="Rule on Histogram" src="https://github.com/vegafusion/vegafusion.github.io/assets/15064365/645a52a1-0b37-4b0a-9da1-1f7d348c1527" /></p>
<p>Because <code class="docutils literal notranslate"><span class="pre">chart</span></code> is composed of two subcharts, the result of <code class="docutils literal notranslate"><span class="pre">vf.transformed_data</span></code> will be a list of two DataFrames.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">hist_df</span><span class="p">,</span> <span class="n">rule_df</span><span class="p">]</span> <span class="o">=</span> <span class="n">vf</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">(</span><span class="n">chart</span><span class="p">)</span>
<span class="n">hist_df</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>    <span class="o">|</span>   <span class="n">bin_maxbins_10_IMDB_Rating</span> <span class="o">|</span>   <span class="n">bin_maxbins_10_IMDB_Rating_end</span> <span class="o">|</span>   <span class="n">__count</span> <span class="o">|</span>
<span class="o">|---</span><span class="p">:</span><span class="o">|-----------------------------</span><span class="p">:</span><span class="o">|---------------------------------</span><span class="p">:</span><span class="o">|----------</span><span class="p">:</span><span class="o">|</span>
<span class="o">|</span>  <span class="mi">0</span> <span class="o">|</span>                            <span class="mi">6</span> <span class="o">|</span>                                <span class="mi">7</span> <span class="o">|</span>       <span class="mi">985</span> <span class="o">|</span>
<span class="o">|</span>  <span class="mi">1</span> <span class="o">|</span>                            <span class="mi">3</span> <span class="o">|</span>                                <span class="mi">4</span> <span class="o">|</span>       <span class="mi">100</span> <span class="o">|</span>
<span class="o">|</span>  <span class="mi">2</span> <span class="o">|</span>                            <span class="mi">7</span> <span class="o">|</span>                                <span class="mi">8</span> <span class="o">|</span>       <span class="mi">741</span> <span class="o">|</span>
<span class="o">|</span>  <span class="mi">3</span> <span class="o">|</span>                            <span class="mi">5</span> <span class="o">|</span>                                <span class="mi">6</span> <span class="o">|</span>       <span class="mi">633</span> <span class="o">|</span>
<span class="o">|</span>  <span class="mi">4</span> <span class="o">|</span>                            <span class="mi">8</span> <span class="o">|</span>                                <span class="mi">9</span> <span class="o">|</span>       <span class="mi">204</span> <span class="o">|</span>
<span class="o">|</span>  <span class="mi">5</span> <span class="o">|</span>                            <span class="mi">2</span> <span class="o">|</span>                                <span class="mi">3</span> <span class="o">|</span>        <span class="mi">43</span> <span class="o">|</span>
<span class="o">|</span>  <span class="mi">6</span> <span class="o">|</span>                            <span class="mi">4</span> <span class="o">|</span>                                <span class="mi">5</span> <span class="o">|</span>       <span class="mi">273</span> <span class="o">|</span>
<span class="o">|</span>  <span class="mi">7</span> <span class="o">|</span>                            <span class="mi">9</span> <span class="o">|</span>                               <span class="mi">10</span> <span class="o">|</span>         <span class="mi">4</span> <span class="o">|</span>
<span class="o">|</span>  <span class="mi">8</span> <span class="o">|</span>                            <span class="mi">1</span> <span class="o">|</span>                                <span class="mi">2</span> <span class="o">|</span>         <span class="mi">5</span> <span class="o">|</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rule_df</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>    <span class="o">|</span>   <span class="n">mean_IMDB_Rating</span> <span class="o">|</span>
<span class="o">|---</span><span class="p">:</span><span class="o">|-------------------</span><span class="p">:</span><span class="o">|</span>
<span class="o">|</span>  <span class="mi">0</span> <span class="o">|</span>            <span class="mf">6.28347</span> <span class="o">|</span>
</pre></div>
</div>
</section>
</section>
<section id="duckdb-0-8-support">
<h2>DuckDB 0.8 Support<a class="headerlink" href="#duckdb-0-8-support" title="Permalink to this heading"></a></h2>
<p>VegaFusion’s <a class="reference internal" href="../../duckdb.html"><span class="std std-doc">DuckDB integration</span></a> has been updated to support <a class="reference external" href="https://github.com/duckdb/duckdb/releases/tag/v0.8.0">DuckDB 0.8.0</a></p>
</section>
<section id="java-api">
<h2>Java API<a class="headerlink" href="#java-api" title="Permalink to this heading"></a></h2>
<p>VegaFusion 1.3 may now be embedded in Java applications using the new <code class="docutils literal notranslate"><span class="pre">io.vegafusion.vegafusion</span></code> jar, which is published to <a class="reference external" href="https://central.sonatype.com/artifact/io.vegafusion/vegafusion">Maven Central</a>.</p>
<p>This was accomplished by wrapping the VegaFusion Rust API with a JNI interface using the <a class="reference external" href="https://github.com/jni-rs/jni-rs"><code class="docutils literal notranslate"><span class="pre">jni-rs</span></code> crate</a>.</p>
</section>
<section id="updates-to-arrow-and-datafusion-dependencies">
<h2>Updates to Arrow and DataFusion dependencies<a class="headerlink" href="#updates-to-arrow-and-datafusion-dependencies" title="Permalink to this heading"></a></h2>
<p>VegaFusion 1.3 updates the dependency on arrow-rs to <a class="reference external" href="https://github.com/apache/arrow-rs/blob/master/CHANGELOG-old.md#3900-2023-05-05">version 39.0</a> and DataFusion to <a class="reference external" href="https://github.com/apache/arrow-datafusion/blob/main/dev/changelog/25.0.0.md">version 25.0</a>.</p>
</section>
<section id="learn-more">
<h2>Learn more<a class="headerlink" href="#learn-more" title="Permalink to this heading"></a></h2>
<p>Check out these resources to learn more:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/hex-inc/vegafusion/releases/tag/v1.3.0">1.3.0 Changelog</a></p></li>
<li><p><a class="reference external" href="https://vegafusion.io/">VegaFusion Documentation</a></p></li>
<li><p><a class="reference external" href="https://github.com/hex-inc/vegafusion">VegaFusion GitHub</a></p></li>
<li><p><a class="reference external" href="https://github.com/hex-inc/vegafusion/issues">Report and Issue</a></p></li>
<li><p><a class="reference external" href="https://github.com/hex-inc/vegafusion/discussions">Start a Discussions</a></p></li>
</ul>
</section>
</section>

<div class="section ablog__blog_comments">
  
  


<div class="section ablog__prev-next">
  <span class="ablog__prev">
    
    
    Previous:
    
    <a href="2023-04-12_Release_1.2.0.html">
      
      <span>Announcing VegaFusion 1.2</span>
    </a>
    
  </span>
  <span class="ablog__spacer">&nbsp;</span>
  <span class="ablog__next">
    
  </span>
</div>

  
  
</div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Jon Mease.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LVD2GWXRQZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-LVD2GWXRQZ', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>