<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VegaFusion Roadmap &mdash; VegaFusion 0.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/site.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Posts" href="blog.html" />
    <link rel="prev" title="Licensing and Funding" href="license_overview.html" />    
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> VegaFusion
            <img src="_static/VegaFusionLogo-Color.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="supported_environments.html">Supported Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="widget.html">VegaFusionWidget</a></li>
<li class="toctree-l1"><a class="reference internal" href="renderer.html">Altair Renderer and Data Transformer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_gallery.html">Example Gallery</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="background.html">Background and Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_it_works.html">How VegaFusion Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="technology.html">Technology</a></li>
<li class="toctree-l1"><a class="reference internal" href="about_the_name.html">About the Name</a></li>
<li class="toctree-l1"><a class="reference internal" href="related_projects.html">Related Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Future</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="license_overview.html">Licensing and Funding</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">VegaFusion Roadmap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#packaging">Packaging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conda-forge-packages">conda-forge packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#non-jupyter-notebook-environments">Non-Jupyter Notebook Environments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#colab">Colab</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#python-dashboard-environments">Python Dashboard Environments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dash-support">Dash support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#streamlit-support">Streamlit support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#panel-support">Panel support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#altair-integration">Altair Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#extracting-data-from-altair-chart">Extracting Data from Altair Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pre-aggregating-large-datasets-in-altair-chart">Pre-Aggregating Large Datasets in Altair Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="#provide-selection-access-from-python">Provide Selection Access from Python</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#serverside-rendering">Serverside Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="#standalone-grpc-server">Standalone gRPC Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#javascript-api-business-intelligence-architecture">JavaScript API / Business Intelligence Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#elastic-scaling-and-high-availability">Elastic Scaling and High Availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="#external-data-providers">External Data Providers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#edge-runtime">Edge Runtime</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/vegafusion/vegafusion/">Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/vegafusion/vegafusion/issues">Report an Issue</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/vegafusion/vegafusion/discussions">Start a Discussion</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Blog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="blog.html">Posts</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">VegaFusion</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>VegaFusion Roadmap</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/roadmap.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
              <div class="tex2jax_ignore mathjax_ignore section" id="vegafusion-roadmap">
<h1>VegaFusion Roadmap<a class="headerlink" href="#vegafusion-roadmap" title="Permalink to this headline"></a></h1>
<p>This page contains an assortment of capabilities that we would like to add to VegaFusion over time.  These are not necessarily in chronological or priority order. If you are interested in contributing time and/or funding to help prioritise these items, please <a class="reference external" href="mailto:jon&#37;&#52;&#48;vegafusion&#46;io">get in touch!</a></p>
<div class="section" id="packaging">
<h2>Packaging<a class="headerlink" href="#packaging" title="Permalink to this headline"></a></h2>
<div class="section" id="conda-forge-packages">
<span id="roadmap-conda-forge-packages"></span><h3>conda-forge packages<a class="headerlink" href="#conda-forge-packages" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">vegafusion-python</span></code> and <code class="docutils literal notranslate"><span class="pre">vegafusion-jupyter</span></code> packages could be submitted to conda-forge.  <code class="docutils literal notranslate"><span class="pre">vegafusion-python</span></code> is written in Rust and must be compiled to each supported operating systema and Python version individually.  <code class="docutils literal notranslate"><span class="pre">vegafusion-jupyter</span></code> will be a <code class="docutils literal notranslate"><span class="pre">noarch</span></code> package that depends on <code class="docutils literal notranslate"><span class="pre">vegafusion-jupyter</span></code>.</p>
</div>
</div>
<div class="section" id="non-jupyter-notebook-environments">
<h2>Non-Jupyter Notebook Environments<a class="headerlink" href="#non-jupyter-notebook-environments" title="Permalink to this headline"></a></h2>
<div class="section" id="colab">
<h3>Colab<a class="headerlink" href="#colab" title="Permalink to this headline"></a></h3>
<p>Colab supports custom JupyterWidgets, so it should be possible to support <code class="docutils literal notranslate"><span class="pre">vegafusion-jupyter</span></code> in Colab. For unknown reasons, it does not work today. See <a class="reference external" href="https://github.com/vegafusion/vegafusion/issues/55">vegafusion#55</a>.</p>
</div>
</div>
<div class="section" id="python-dashboard-environments">
<h2>Python Dashboard Environments<a class="headerlink" href="#python-dashboard-environments" title="Permalink to this headline"></a></h2>
<p>The VegaFusion Jupyter Widget was intentionally designed to push as much logic as possible into the <code class="docutils literal notranslate"><span class="pre">vegafusion-wasm</span></code> package.  The logic that is left in the Jupyter Widget extension is primarily related to client-server communication, and html layout.  With this approach, it shouldn’t require a substantial amount of addition code in order to support alternative dashboard environments.</p>
<div class="section" id="dash-support">
<span id="roadmap-dash"></span><h3>Dash support<a class="headerlink" href="#dash-support" title="Permalink to this headline"></a></h3>
<p>A Dash component for VegaFusion could be written.<br />
See <a class="reference external" href="https://dash.plotly.com/plugins">dash.plotly.com/plugins</a>.</p>
</div>
<div class="section" id="streamlit-support">
<span id="roadmap-streamlit"></span><h3>Streamlit support<a class="headerlink" href="#streamlit-support" title="Permalink to this headline"></a></h3>
<p>A Streamlit component for VegaFusion could be written.<br />
See <a class="reference external" href="https://docs.streamlit.io/library/components/create">docs.streamlit.io/library/components/create</a>.</p>
</div>
<div class="section" id="panel-support">
<span id="roadmap-panel"></span><h3>Panel support<a class="headerlink" href="#panel-support" title="Permalink to this headline"></a></h3>
<p>A Panel component for VegaFusion could be written.<br />
See <a class="reference external" href="https://panel.holoviz.org/user_guide/Custom_Components.html">panel.holoviz.org/user_guide/Custom_Components.html</a></p>
</div>
</div>
<div class="section" id="altair-integration">
<h2>Altair Integration<a class="headerlink" href="#altair-integration" title="Permalink to this headline"></a></h2>
<div class="section" id="extracting-data-from-altair-chart">
<span id="roadmap-extract-data"></span><h3>Extracting Data from Altair Chart<a class="headerlink" href="#extracting-data-from-altair-chart" title="Permalink to this headline"></a></h3>
<p>The <a class="reference external" href="https://github.com/altair-viz/altair-transform#example-extracting-data">Extracting Data</a> workflow supported by <code class="docutils literal notranslate"><span class="pre">altair-transform</span></code> could be implemented. This would involve directly converting Altair transforms into Vega transforms without using Vega-Lite in the browser. The transforms are nearly identical, so this shouldn’t present a major challenge.</p>
</div>
<div class="section" id="pre-aggregating-large-datasets-in-altair-chart">
<span id="roadmap-pre-agg"></span><h3>Pre-Aggregating Large Datasets in Altair Chart<a class="headerlink" href="#pre-aggregating-large-datasets-in-altair-chart" title="Permalink to this headline"></a></h3>
<p>The <a class="reference external" href="https://github.com/altair-viz/altair-transform#example-pre-aggregating-large-datasets">Pre-Aggregating Large Datasets</a> workflow from <code class="docutils literal notranslate"><span class="pre">altair-transform</span></code> could be implemented. As above, this would involve directly converting Altair transforms into Vega transforms without using Vega-Lite in the browser.</p>
</div>
<div class="section" id="provide-selection-access-from-python">
<h3>Provide Selection Access from Python<a class="headerlink" href="#provide-selection-access-from-python" title="Permalink to this headline"></a></h3>
<p>The current state of Altair <a class="reference external" href="https://altair-viz.github.io/user_guide/interactions.html#selections-building-blocks-of-interactions">selections</a> could be made available through the <code class="docutils literal notranslate"><span class="pre">VegaFusionWidget</span></code>.  This would make it possible to register custom Python logic to run in response to user interaction events. It would also make it possible to synchronize selections across Charts displayed in different notebook output cells.</p>
</div>
</div>
<div class="section" id="serverside-rendering">
<h2>Serverside Rendering<a class="headerlink" href="#serverside-rendering" title="Permalink to this headline"></a></h2>
<p>The initial focus of VegaFusion is to accelerate data processing operations by running them on a server with efficient parallelization rather than in a single-threaded browser context. This can provide significant benefit for chart specifications that make use of aggregation to reduce the size of a dataset before transferring it to the client for rendering by the Vega JavaScript library.  A histogram is the canonical example of this kind of visualization, where the binning and aggregation are performed on the server and only the bin edges and heights of the bars are transferred from the server to the client.</p>
<p>This approach is not particularly helpful for charts that include a large number of mark instances. A scatter plot is the canonical example of this kind of visualization, where currently the entire dataset must be transferred to the client for rendering with the Vega JavaScript library.</p>
<p>To improve the performance of scatter-plot style charts, we could extend the VegaFusion runtime to include support for rendering a subset of the Vega <a class="reference external" href="https://vega.github.io/vega/docs/marks/">marks</a>.  One approach to investigate is the possibility of using the VegaFusion Planner to replace a large mark (e.g. a <a class="reference external" href="https://vega.github.io/vega/docs/marks/symbol/">symbol</a> mark with 10 million points) with an <a class="reference external" href="https://vega.github.io/vega/docs/marks/image/">image</a> mark. Then the VegaFusion runtime would render the symbol mark to a PNG image, and send the image (rather than the full dataset) to the client.</p>
</div>
<div class="section" id="standalone-grpc-server">
<h2>Standalone gRPC Server<a class="headerlink" href="#standalone-grpc-server" title="Permalink to this headline"></a></h2>
<p>The VegaFusion Runtime is currently embedded in Python in the <code class="docutils literal notranslate"><span class="pre">vegafusion-python</span></code> package. As an alternative, the Runtime could operate as a standalone <a class="reference external" href="https://grpc.io/">gRPC</a> server.  The Runtime interface is already defined in terms of protocol buffer messages, so very little refactoring will be required to accomplish this.</p>
<p>The advantage of using this server architecture is that multiple clients will be able to share the same runtime. This can substantially reduce memory usage if the same dashboard is being served to many individual users.  It also opens up the possibility for the server to run on a separate machine.</p>
</div>
<div class="section" id="javascript-api-business-intelligence-architecture">
<h2>JavaScript API / Business Intelligence Architecture<a class="headerlink" href="#javascript-api-business-intelligence-architecture" title="Permalink to this headline"></a></h2>
<p>The VegaFusion client logic is currently compiled to WebAssembly and embedded in a Jupyter Widget extension.  Once the VegaFusion Runtime is available as a standalone gRPC server, it will be possible to embed the VegaFusion WebAssembly client library into custom web applications.  The client library would then communicate with a VegaFusion Runtime using <a class="reference external" href="https://github.com/grpc/grpc-web">gRPC-Web</a>.</p>
<p>A motivating use-case for this architecture is a web-based Business Intelligence tool that generates Vega/Vega-Lite specifications.  Such a tool could operate entirely in the browser for small to medium sized datasets, and then use VegaFusion to provide optional server-side acceleration for large datasets.  Thanks to the server architecture described above, a single gRPC server could support many simultaneous user sessions.</p>
<p>Here’s what this architecture might look like</p>
<img width="895" alt="Screen Shot 2022-01-19 at 3 57 32 PM" src="https://user-images.githubusercontent.com/15064365/150212638-5a4d6e74-926b-4426-8310-4ebbb9244b0c.png"> 
</div>
<div class="section" id="elastic-scaling-and-high-availability">
<h2>Elastic Scaling and High Availability<a class="headerlink" href="#elastic-scaling-and-high-availability" title="Permalink to this headline"></a></h2>
<p>When the anticipated user load surpasses the capabilities of a single server, a pool of VegaFusion gRPC servers could run behind a load-balancer.  Thanks to Vega Fusion’s state model and the gRPC architecture, it would be possible to freely move a user session between servers without losing the user’s session state.  This architectural feature is the key to providing reliable implementations of elastic scaling (adjusting the server pool size based on the current user load) and High Availability (recovering from the failure of a single server without disrupting active user sessions).</p>
</div>
<div class="section" id="external-data-providers">
<span id="roadmap-external-data-providers"></span><h2>External Data Providers<a class="headerlink" href="#external-data-providers" title="Permalink to this headline"></a></h2>
<p>Specialized Runtimes could be written for particular data providers like PostgreSQL, OmniSci, Spark, and Dask.  These Runtimes could support a small subset of transforms and expression language functions and allow the Planner to determine what work to assign to the Runtime.</p>
</div>
<div class="section" id="edge-runtime">
<h2>Edge Runtime<a class="headerlink" href="#edge-runtime" title="Permalink to this headline"></a></h2>
<p>A subset of the Runtime (in particular the cache) could be compiled to <a class="reference external" href="https://wasi.dev/">WASI</a> and run on edge services like Fastly’s <a class="reference external" href="https://www.fastly.com/products/edge-compute/serverless">compute&#64;edge</a> or Cloudflare’s <a class="reference external" href="https://workers.cloudflare.com/">Cloudfare workers</a>.  A user session would connect directly to an edge Runtime. The edge runtime would perform cheap computations itself to minimize latency and delegate expensive computations to a server Runtime running on a powerful VM from a traditional cloud provider. The edge Runtime would use the regular VegaFusion caching mechanism to cache the results of calculations performed by the server, and share that cache across all user sessions sharing that edge node.</p>
<p>Here’s what an architecture the combines the Edge Runtime and External Data Providers might look like</p>
<img width="584" alt="Screen Shot 2022-01-19 at 4 00 03 PM" src="https://user-images.githubusercontent.com/15064365/150212960-2da194db-05e7-4d38-96cc-69c293689f44.png">
</div>
</div>

<div class="section">
   
</div>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="license_overview.html" class="btn btn-neutral float-left" title="Licensing and Funding" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="blog.html" class="btn btn-neutral float-right" title="Posts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Jon Mease.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LVD2GWXRQZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-LVD2GWXRQZ', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>